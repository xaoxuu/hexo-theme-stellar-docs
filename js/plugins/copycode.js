window.codeElements.forEach(e=>{const c=document.createElement("div");c.className="copy-btn",c.textContent=ctx.copycode.default_text,e.appendChild(c),c.addEventListener("click",async()=>{var t=e.querySelector("pre")?.innerText||"";if(navigator.clipboard)try{await navigator.clipboard.writeText(t),c.textContent=ctx.copycode.success_text,c.classList.add("success"),hud.toast(ctx.copycode.toast,2500)}catch(t){c.textContent="未获得用户许可",c.classList.add("warning")}else c.textContent="浏览器不支持/非HTTPS",c.classList.add("warning");setTimeout(()=>{c.textContent=ctx.copycode.default_text,c.classList.remove("success","warning")},3e3)})});